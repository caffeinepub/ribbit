{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Add deterministic pond rank indicator to All Ponds cards",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Compute deterministic ranks from the rendered ponds list and display each pond’s rank on its /ponds card without overlapping the Join/Joined control.",
      "acceptanceCriteria": [
        "On /ponds (All Ponds page), each pond card shows a visible rank indicator (e.g., “#1”, “#2”, …).",
        "Ranks are computed deterministically from the same list being rendered: sort ponds by lilyCount (descending), then memberCount (descending), then name (ascending), and assign ranks starting at 1.",
        "The Join/Joined control remains in the top-right of the card and is not visually overlapped by the rank indicator.",
        "No backend API changes are required to render rank (rank is derived client-side from the ponds list)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/lib/pondRank.ts",
          "operation": "create",
          "description": "Add a small utility to deterministically sort ponds by lilyCount (desc), then memberCount (desc), then name (asc), and return a stable rank mapping (pond name -> rank starting at 1) derived solely from the provided list."
        },
        {
          "path": "frontend/src/pages/AllPondsPage.tsx",
          "operation": "modify",
          "description": "Update the All Ponds grid rendering to (1) derive ranks client-side from the same ponds list being rendered using the deterministic sort rules, and (2) render a visible rank indicator (e.g., “#1”) on each pond card (e.g., absolute top-left with appropriate padding/z-index) while preserving the Join/Joined control in the existing top-right position and ensuring the two UI elements do not overlap."
        }
      ]
    }
  ]
}