{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "New project",
  "architectural_notes": [
    "Scope constraint: only address Ribbits image upload functionality and missing blurred background; do not change anything else; do not start coding yet until user approves."
  ],
  "known_issues": [
    "Ribbits image uploads are not working.",
    "Ribbits image uploads are missing the blurred background effect."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-add-end-to-end-support-for-images-attached-to-ribbits-the-frontend-must-upload-the-selected-image-when-creating-a-ribbit-the-backend-must-persist-the-image-blob-with-the-ribbit-and-ribbit-queries-must-return-the-image-so-it-can-be-displayed",
      "title": "Add end-to-end support for images attached to Ribbits: the frontend must upload the selected image when creating a ribbit, the backend must persist the image blob with the ribbit, and ribbit queries must return the image so it can be displayed.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-ribbit-images-render-with-the-same-blurred-background-backdrop-behavior-used-for-non-4-3-images-i-e-a-blurred-backdrop-behind-the-image-and-apply-this-consistently-anywhere-ribbits-are-rendered-with-images-thread-view-on-lily-page-and-the-profile-ribbit-comments-list-if-applicable",
      "title": "Ensure ribbit images render with the same blurred background/backdrop behavior used for non-4:3 images (i.e., a blurred backdrop behind the image), and apply this consistently anywhere ribbits are rendered with images (thread view on Lily page and the profile ribbit/comments list if applicable).",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Fix Ribbits image uploads so they work and include the blurred background (no other changes)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Perform a safe state upgrade for existing deployed data to support the new optional ribbit image field without breaking existing ribbits.",
      "reqIds": [
        "REQ-3"
      ],
      "status": "pending"
    }
  ],
  "projectName": "Fix Ribbits image uploads (store + display) including blurred background",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}